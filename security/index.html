<!DOCTYPE html>
<html lang= "en">

<head>
	<meta charset="utf-8">
	<title>Security - Assignment 4</title>
	<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>
	<h1>Security - Assignment 4</h1>
	<h2> Introduction</h2>
		<p>I was hired as a security consultant, to look for weaknesses in a potentially vunerable web application. The application is a game and game server, specifically the game 2048. I was primarily focused on exploiting the server that holds the score information. There are three routes for the server, a GET index, GET scores.json and POST submit.</p>
		<ul>
			<li>The GET /, or get index route, displays scores from my client's 2048 game at <a href="https://secret-oasis-38538.herokuapp.com">this url</a>, an app hosted by Heroku.</li>
			<li>The GET scores.json path allows the user to enter a query (username, score, or grid) in the website <a href="https://secret-oasis-38538.herokuapp.com/scores.json">URL</a> to get json information attached to that particular key</li>
			<li>The POST submit is how the scores are added to the server from the 2048 game. It adds information such as username, score, grid and time to a MongoDB database known as scores.</li>
		</ul>

	<h2>Methodology</h2>
		<p>Black Box Testing- I began with tests for simple things covered in class, without looking at the code: XSS using curl on the submit route and NoSQL injection attacks in the scores.json route by using the query operand [$ne]. The XSS attack was sucessful, but the injection was not, so I then viewed the code begin white box testing.</p>
		<p>White Box Testing- Looking into the code didn't provide any immediately notable vunerabilities, like hardcoded passwords or bad coding practice. In fact, it just explained why my previous attempt at injection didnt work, since instead of using the find function on the collection to query for usernames, he used a filter function. However, I noticed that this app uses cors as a dependency. When looking into this, the default configuration of the cors dependency includes "origin" = "*", giving access-control-allow-origin power to any origin, since the asterisk is a wildcard. Additionally, by looking at the code I knew the server used a MongoDB database. Access to the Heroku app allowed me to go into mLab and check that this app uses the free version of MongoDB, which I decided to spam in an DDOS attack, or Distributed Denial of Service Attack. I used a bash script in terminal(s) to try to overwhelm the application, either through Heroku or MongoDB, as I wasn't sure what would break first.</p>
		<p>Tools: curl, bash script</p>

	<h2>Abstract of Findings</h2>
		<p>Provide an overview of all the security and privacy issues you identified. This section should be written for non-technical managers who do not have technical expertise and do not have time to read the entire document. Write this section using lay language.</p>

	<h2>Issues Found</h2>
		<p><em>Cross Site Scripting (XSS)</em></p>
		<p>Found in index.js, in the POST submit path</p>
		<p>Severity of issue: Medium. Allows attacker to hijack the page using JavaScript, allowing potentially malicious actions, such as redirecting the user to an undesired site, taking control of the 2048 site, or accessing cookies or local storage (if the application has them, although this app does not). However can be fixed relatively easily through character stripping.</p>
		<p>Description of issue: Cross-Site Scripting is when user input uses JavaScript to trick the application into behaving differently. By using script tags in the username value, it allows editing of the original content</p>
		<p>This can be found using curl, however would also work from the 2048 webpage, as either way the submit route does not strip characters.</p>
		<p>An example of how to change the username would be to use	curl --data "username= <"script">alert("Brigid");</"script">&score=79&grid={}" URL (without the quotes within the script tag, those are there to prevent this page from having an alert show up)</p>
		<img src="curl_xss.png" alt="screen shot of terminal command line, with the command curl --data and information, being sent to a website https://secret-oasis-38538.herokuapp.com/submit"/>
		<img src="alert_popup_window.png" alt="Screen shot of HTML page covered by a pop up window that says Brigid"/>
		<p>This can be resolved by validating the user input, and checking for concerning such as "<" or ">". They can be replaced with equilvant values, like & lt; or & gt; (without the space between & and letters)SHOW CODE</p>
		
		<p>	Access-Control-Allow-Origin
			Location or page where issue was found
			Severity of issue (e.g., low, medium , or high). Justify your answer.
			Description of issue. How did you find it? A screenshot of problem is excellent.
			Proof of vulnerability. Show pictures or it didn't happen.
			Resolution. Make recommendation(s) on how issue can be resolved. Show code if possible.
		<img src="cors_in_server.png" alt="Where cors dependency is used in server"/>
		<img src="npm_cors.png" alt="npm's display of default configuration"/>

		</p>
		
		<p>Distributed Denial of Service
			Issue (e.g., database injection, really bad programming practice)
			Location or page where issue was found
			Severity of issue (e.g., low, medium , or high). Justify your answer.
			Description of issue. How did you find it? A screenshot of problem is excellent.
			Proof of vulnerability. Show pictures or it didn't happen.
			Resolution. Make recommendation(s) on how issue can be resolved. Show code if possible.

		<img src="ddos_bash_script.png" alt="Example screenshot of a bash script code"/>
		<img src="bash_script_2.png" alt="Example of a faster bash script, that doesnt wait for the server's response"/>
		<img src="dos_attack.png" alt="Screen shot of HTML Page featuring High Scores for 2048, mainly comprised of dos_attack as a username "/>
		<img src="mongo_after_app_crashed.png" alt="The mongodb interface displaying the number of records and amount of used storage in the database"/>
		<img src="crashed_app.png" alt="Heroku crashed app message on secret basin"/>
		</p>


			<p>needs
			Issue (e.g., database injection, really bad programming practice)
			Location or page where issue was found
			Severity of issue (e.g., low, medium , or high). Justify your answer.
			Description of issue. How did you find it? A screenshot of problem is excellent.
			Proof of vulnerability. Show pictures or it didn't happen.
			Resolution. Make recommendation(s) on how issue can be resolved. Show code if possible</p>


	<h2>Conclusion</h2>
			<p>You can also list future considerations and recommendations with costs.</p>

			Could fix access-control-allow-origin by only accepting 

	<h2>References</h2>
		<ul>
			<li><a href="https://www.pluralsight.com/blog/it-ops/ethical-hacking-how-to-create-a-dos-attack">https://www.pluralsight.com/blog/it-ops/ethical-hacking-how-to-create-a-dos-attack</a></li>
			<li><a href="https://medium.com/bugbountywriteup/exploiting-apis-with-postman-and-google-chrome-ade13ce74e2b">https://medium.com/bugbountywriteup/exploiting-apis-with-postman-and-google-chrome-ade13ce74e2b</a></li>
			<li><a href="https://github.com/tuftsdev/WebProgramming/tree/gh-pages/examples">https://github.com/tuftsdev/WebProgramming/tree/gh-pages/examples</a></li>
			<li><a href="https://ryanstutorials.net/bash-scripting-tutorial/bash-loops.php">https://ryanstutorials.net/bash-scripting-tutorial/bash-loops.php</a></li>
			<li><a href="https://www.npmjs.com/package/cors">https://www.npmjs.com/package/cors</a></li>
		</ul>

</body>
</html>